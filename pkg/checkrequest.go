package pkg

import (
	"fmt"
	"medcalcbot/set"
	"regexp"
	"strings"
)

func CheckRequest(f string) string {
	charSum := len(f) / 2                  // –°—Ä–∞–∑—É –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –∫–∏—Ä–∏–ª–∏—Ü—ã
	search := []string{}                   // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –º–∞—Å—Å–∏–≤ –≤—ã–≤–æ–¥–∏–º—ã—Ö –≤ –æ—Ç–≤–µ—Ç–µ –¥–∞–Ω–Ω—ã—Ö
	f = strings.ToLower(f)                 // –ù–∞–º–µ—Ä–µ–Ω–Ω–æ –ø—Ä–∏–≤–æ–¥–∏–º –≤—Å–µ —Å–∏–º–≤–æ–ª—ã –≤ lowercase
	re := regexp.MustCompile(set.RuSymbol) //–ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –∫–∏—Ä—Ä–∏–ª–∏—á–µ—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã
	isRussian := re.MatchString(f)
	if isRussian {
		if charSum < 3 {
			req1 := "üö´ –í–≤–µ–¥–∏—Ç–µ –±–æ–ª–µ–µ 2-—Ö –Ω–∞—á–∞–ª—å–Ω—ã—Ö –±—É–∫–≤ –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è\nüí¨ –ö –ø—Ä–∏–º–µ—Ä—É –¥–ª—è –ø–æ–∏—Å–∫–∞ –≥–µ–º–∞–≥–ª–æ–±–∏–Ω–∞ –≤–≤–µ–¥–∏—Ç–µ'–≥–µ–º' –∏–ª–∏ '–≥–µ–º–æ'!"
			search = append(search[:], req1)
		} else {
			search = append(search, f)
		}
	} else {
		req2 := "üö´ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–æ–¥–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã.\nüí¨ –ü–æ–∏—Å–∫ –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä—É—Å—Å–∫–∏—Ö –±—É–∫–≤!"
		search = append(search[:], req2)
	}
	x := fmt.Sprintf(strings.Join(search, ""))
	return x
}
